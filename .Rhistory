library("mapview")
library("here")
map_evi <- tm_raster(evi_mean)
tmap_mode("view")
map_evi
map_evi <- tm_shape(pixel)
tmap_mode("view")
map_evi
map_evi <- tm_shape(pixel)
tmap_mode("view")
map_evi
plot(map_evi)
map_evi <- tm_shape(pixel) + tm_format_Europe()
map_evi <- tm_shape(pixel) + tm_format_World()
map_evi <- tm_shape(pixel) + tm_format("World")
map_evi <- tm_shape(pixel) + tm_format("World") + tm_polygons()
map_evu
map_evi
names_raster <- list.files(path = here::here("data"),
pattern = '.tif$',
all.files = TRUE,
full.names = FALSE)
names_raster
# Get names of rasters
names_raster <- list.files(path = here::here("data"),
pattern = '*EVI*.tif$',
all.files = TRUE,
full.names = FALSE)
names_raster
names_raster <- list.files(path = here::here("data"),
pattern = 'EVI*.tif$',
all.files = TRUE,
full.names = FALSE)
# Get names of rasters
names_raster <- list.files(path = here::here("data"),
pattern = '^EVI.*tif',
all.files = TRUE,
full.names = FALSE)
names_raster <- list.files(path = here::here("data"), pattern = '^EVI.*tif',
all.files = TRUE, full.names = FALSE)
names_raster
evi_rasters <- stack(names_raster)
names_raster <- list.files(path = here::here("data"), pattern = '^EVI.*tif',
all.files = TRUE, full.names = FALSE)
evi_rasters <- stack(names_raster)
names_raster
# Get names of rasters
names_raster <- list.files(path = here::here("data"), pattern = '^EVI.*tif',
all.files = TRUE, full.names = TRUE)
evi_rasters <- stack(names_raster)
# Get names of rasters
names_raster <- list.files(path = here::here("data"), pattern = '*tif',
all.files = TRUE, full.names = TRUE)
names_raster
disimilitud <- raster(here::here("/data/Disimilud_EFTs_~1840m_2001-2016.tif"))
plot(disimilitud)
divEspa <- raster(here::here("/data/DivEspaMediaEFTs_1840m_2001-2016_.tif"))
disimilitud <- raster(here::here("/data/Disimilud_EFTs_~1840m_2001-2016.tif"))
divEspa <- raster(here::here("/data/DivEspaMediaEFTs_1840m_2001-2016_.tif"))
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016.tif"))
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
eft <- raster(here::here("/data/EFTs_230m_2001-2016.tif"))
eft_rareza <- raster(here::here("data/Rareza_230m_2001-2016.tif"))
eft_var_inter <- raster(here::here("data/Variabilidad_interanual_230m_2001-2016.tif"))
extent(evi_mean)
extent(evi_cv)
extent(evi_mmax)
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = TRUE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = TRUE)
evi_stack <- stack(evi_mean, evi_mmax, evi_cv)
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = TRUE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = TRUE)
evi_stack <- stack(evi_mean, evi_mmax, evi_cv)
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
evi_stack <- stack(evi_mean, evi_mmax, evi_cv)
evi_stack
plot(evi_stack)
?rasterToPolygons
pixel <- rasterToPolygons(evi_stack)
head(pixel)
exten(eft)
extent(eft)
tail(pixel)
View(pixel)
evi_cv1 <- resample(evi_cv, evi_mean)
extent(evi_cv1)
extent(evi_mean)
# Create stack
evi_stack <- stack(evi_mean,  evi_cv1)
pixel <- rasterToPolygons(evi_stack)
evi_stack
evi_mean
evi_cv
# Sovle small variations of extent
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
pixel <- rasterToPolygons(evi_stack)
names(pixel)
names(pixel) <- c("mean_EVI", "mMax_EVI", "sCV_EVI")
head(pixel)
map_evi <- tm_shape(pixel) + tm_format("World") + tm_polygons()
tmap_mode("view")
map_evi
library(shiny)
map_evi <- tm_shape(pixel) + tm_format("World") + tm_polygons() + tm_style_gray()
map_evi <- tm_shape(pixel) + tm_format("World") + tm_polygons() + tm_style("gray")
map_evi
eft
map_evi <- tm_shape(pixel) +
tm_format("World") +
tm_polygons(alpha = 0) + tm_style("gray") +
tm_raster(eft)
tmap_mode("view")
map_evi
map_evi <- tm_shape(pixel) +
tm_format("World") +
tm_style("gray") +
tm_raster(eft)
map_evi
data(World, land, metro)
pal8 <- c("#33A02C", "#B2DF8A", "#FDBF6F", "#1F78B4", "#999999", "#E31A1C", "#E6E6E6", "#A6CEE3")
tm_shape(land, ylim = c(-88,88)) +
tm_raster("cover_cls", palette = pal8, title = "Global Land Cover") +
tm_shape(metro) + tm_dots(col = "#E31A1C") +
tm_shape(World) +
tm_borders(col = "black") +
tm_layout(scale = .8,
legend.position = c("left","bottom"),
legend.bg.color = "white", legend.bg.alpha = .2,
legend.frame = "gray50")
map_evi <- tm_raster(eft) + tm_shape("World")
map_evi
map_evi <- tm_raster(eft) + tm_format("World")
map_evi
map_evi <- tm_raster(eft) + tm_format("World") + tm_shape(eft)
map_evi
data(land)
mapita <- tm_shape(land) + tm_raster(eft, palette=terrain.colors(64)) +
tm_format("World")
map_evi
mapita <- tm_raster(eft, palette=terrain.colors(64)) +
tm_format("World")
mapita
mapita
library("raster")
library("tmap")
library("mapview")
library("here")
disimilitud <- raster(here::here("/data/Disimilud_EFTs_~1840m_2001-2016.tif"))
divEspa <- raster(here::here("/data/DivEspaMediaEFTs_1840m_2001-2016_.tif"))
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
eft <- raster(here::here("/data/EFTs_230m_2001-2016.tif"))
eft_rareza <- raster(here::here("data/Rareza_230m_2001-2016.tif"))
eft_var_inter <- raster(here::here("data/Variabilidad_interanual_230m_2001-2016.tif"))
# EVI
# Sovle small variations of extent
ext <- extent(evi_mean)
ext
extent(evi_mmax)
# Sovle small variations of extent
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
eft <- raster(here::here("/data/EFTs_230m_2001-2016.tif"))
eft_rareza <- raster(here::here("data/Rareza_230m_2001-2016.tif"))
eft_var_inter <- raster(here::here("data/Variabilidad_interanual_230m_2001-2016.tif"))
# EVI
# Sovle small variations of extent
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
pixel <- rasterToPolygons(evi_stack)
# Sovle small variations of extent
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = TRUE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = TRUE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
ncell(evi_mean)
ncell(evi_cv)
ncell(evi_mmax)
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016.tif"))
ncell(evi_mean)
ext(evi_cv)
extent(evi_cv)
extent(evi_cv)[1]
as.data.frame(extext(evi_cv))
as.data.frame(extent(evi_cv))
as.matrix(extent(evi_cv))
t(as.matrix(extent(evi_cv)))
as.data.frame(as.matrix(extent(evi_cv)))
evi_mean
evi_mean@ncols
ra <- evi_mean
ncell(ra)
ra@file
ra@data
evi_mean@nra@data@names
ra@data@names
res(ra)
es(ra)[1]
res(ra)[1]
rxmax(ra)
xmax(ra)
ra
cbind(
variable = ra@data@names,
n_cells = ncell(ra),
ncol(ra)
res_x = res(ra)[1], res_y = res(ra)[1],
xmin = xmin(ra), xmax(ra), ymin(ra), ymax(ra),
)
ncol(r)
ncol(ra)
crs(ra)
str(crs(ra))
ra@crs@projargs
ra(minValue())
minValue(ra)
aux <- cbind(
variable = ra@data@names,
n_cells = ncell(ra),
n_col = ncol(ra), n_row = nrow(ra),
res_x = res(ra)[1], res_y = res(ra)[2],
xmin = xmin(ra), xmax(ra), ymin(ra), ymax(ra),
crs = ra@crs@projargs,
min_value = minValue(ra), max_value = maxValue(ra)
)
aux
aux <- data.frame(
variable = ra@data@names,
n_cells = ncell(ra),
n_col = ncol(ra), n_row = nrow(ra),
res_x = res(ra)[1], res_y = res(ra)[2],
xmin = xmin(ra), xmax(ra), ymin(ra), ymax(ra),
crs = ra@crs@projargs,
min_value = minValue(ra), max_value = maxValue(ra)
)
View(aux)
names_raster <- list.files(path = here::here("data"), pattern = '*tif',
all.files = TRUE, full.names = TRUE)
names_raster
names_raster <- list.files(path = here::here("data"), pattern = '*tif',
all.files = TRUE, full.names = TRUE)
info_rasters <- data.frame()
for (i in names_raster){
ra <- raster(i)
aux <- data.frame(
variable = ra@data@names,
n_cells = ncell(ra),
n_col = ncol(ra), n_row = nrow(ra),
res_x = res(ra)[1], res_y = res(ra)[2],
xmin = xmin(ra), xmax(ra), ymin(ra), ymax(ra),
crs = ra@crs@projargs,
min_value = minValue(ra), max_value = maxValue(ra)
)
info_rasters <- rbind(info_rasters, aux)
}
View(info_rasters)
warning()
warnings()
disimilitud <- raster(here::here("/data/Disimilud_EFTs_~1840m_2001-2016.tif"))
disimilitud
plot(disimilitud)
disimilitud <- raster(here::here("/data/Disimilud_EFTs_1840m_2001-2016.tif"))
disimilitud
plot(disimilitud)
disimilitud1 <- raster(here::here("/data/disimilitud.tif"))
disimilitud1
plot(disimilitud1)
divEspa <- raster(here::here("/data/DivEspaMediaEFTs_1840m_2001-2016_.tif"))
plot(divEspa)
dev.off()
plot(divEspa)
plot(disimilitud1)
minValue(disimilitud)
maxValue(disimilitud)
disimilitud <- raster(here::here("/data/Disimilud_EFTs_1840m_2001-2016.tif"))
divEspa <- raster(here::here("/data/DivEspaMediaEFTs_1840m_2001-2016_.tif"))
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016.tif"))
evi_mean2 <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
eft <- raster(here::here("/data/EFTs_230m_2001-2016.tif"))
eft_rareza <- raster(here::here("data/Rareza_230m_2001-2016.tif"))
eft_var_inter <- raster(here::here("data/Variabilidad_interanual_230m_2001-2016.tif"))
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
# Sovle small variations of extent
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = TRUE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = TRUE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
pixel <- rasterToPolygons(evi_stack)
# Create stack
evi_stack <- stack(evi_mean2,  evi_mmax, evi_cv)
pixel <- rasterToPolygons(evi_stack)
head(pixel)
name(evi_mean2)
names(evi_mean2)
evi_mean2 <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
names(evi_mean2) <- "EVI_mean"
ext <- extent(evi_mean2)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
#
# Create stack
evi_stack <- stack(evi_mean2,  evi_mmax, evi_cv)
pixel <- rasterToPolygons(evi_stack)
evi_mean2 <- calc(evi_mean2/10000)
?calc
evi_mean2 <-evi_mean2 / 10000
plot(evi_mean2)
evi_mmax
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
names(evi_mmax) <- "EVI_mMax"
evi_mmax
plot(evi_mmax)
evi_mmax1 <- reclassify(evi_mmax, c(1,1,"Jan",
2,2,"Feb",
3,3,"Mar",
4,4,"Apr",
5,5,"May",
6,6,"Jun",
7,7,"Jul",
8,8,"Aug",
9,9,"Sep",
10,10,"Oct",
11,11,"Nov",
12,12,"Dec"))
levels(evi_mmax)
ratify(evi_mmax)
l <- ratify(evi_mmax)
l
l <- ratify(evi_mmax)
rat <-levels(l)[[1]]
rat
rat$month <- levels(l)[[1]]$ID
rat
rat$landuse <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
rat
l <- ratify(evi_mmax)
rat <-levels(l)[[1]]
rat$month <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
rat
levels(l) <- rat
l
evi_mmax
levels(evi_mmax) <- rat
evi_mmax
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
names(evi_mean) <- "EVI_mean"
evi_mean <-evi_mean / 10000
# mean
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
names(evi_mean) <- "EVI_mean"
evi_mean <-evi_mean / 10000
# mMax
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
names(evi_mmax) <- "EVI_mMax"
# Add months to evi_mmax
l <- ratify(evi_mmax)
rat <-levels(l)[[1]]
rat$month <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
levels(evi_mmax) <- rat
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
evi_cv
plot(evi_cv)
evi_cv <- evi_cv / 10000
plot(evi_cv)
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
evi_cv <- evi_cv / 1000
plot(evi_cv)
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
evi_cv <- evi_cv / 100
plot(evi_cv)
# mean
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
names(evi_mean) <- "EVI_Mean"
evi_mean <-evi_mean / 10000
# mMax
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
names(evi_mmax) <- "EVI_DateMax"
# Add months to evi_mmax
l <- ratify(evi_mmax)
rat <-levels(l)[[1]]
rat$month <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
levels(evi_mmax) <- rat
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
evi_cv <- evi_cv / 100 #####
names(evi_cv) <- "EVI_sCV"
# EVI
# Solve small variations of extent
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
pixel <- rasterToPolygons(evi_stack)
# Load Raster
library("raster")
library("tmap")
library("mapview")
library("here")
# Read raster
# EVI
# evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016.tif"))
# mean
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
names(evi_mean) <- "EVI_Mean"
evi_mean <-evi_mean / 10000
# mMax
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
names(evi_mmax) <- "EVI_DateMax"
# Add months to evi_mmax
l <- ratify(evi_mmax)
rat <-levels(l)[[1]]
rat$month <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
levels(evi_mmax) <- rat
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
evi_cv <- evi_cv / 100 #####
names(evi_cv) <- "EVI_sCV"
# EVI
# Solve small variations of extent
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
pixel <- rasterToPolygons(evi_stack)
library("raster")
library("tmap")
library("mapview")
library("here")
# Read raster
# EVI
# evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016.tif"))
# mean
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
names(evi_mean) <- "EVI_Mean"
evi_mean <-evi_mean / 10000
# mMax
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
names(evi_mmax) <- "EVI_DateMax"
# Add months to evi_mmax
l <- ratify(evi_mmax)
rat <-levels(l)[[1]]
rat$month <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
levels(evi_mmax) <- rat
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
evi_cv <- evi_cv / 100 #####
names(evi_cv) <- "EVI_sCV"
# EVI
# Solve small variations of extent
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
# Create stack
evi_stack <- stack(evi_mean,  evi_mmax, evi_cv)
# mean
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
names(evi_mean) <- "EVI_Mean"
evi_mean <-evi_mean / 10000
# mMax
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
names(evi_mmax) <- "EVI_DateMax"
# Add months to evi_mmax
l <- ratify(evi_mmax)
rat <-levels(l)[[1]]
rat$month <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
levels(evi_mmax) <- rat
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
evi_cv <- evi_cv / 100 #####
names(evi_cv) <- "EVI_sCV"
# EVI
# Solve small variations of extent
ext <- extent(evi_mean)
evi_mean <- raster(here::here("data/EVI_medio_230m_2001-2016_v2.tif"))
evi_mmax<- raster(here::here("data/EVI_MMAX_230m_2001-2016.tif"))
evi_cv <- raster(here::here("data/EVI_sCV_230m_2001-2016.tif"))
# EVI
# Solve small variations of extent
ext <- extent(evi_mean)
evi_cv <- setExtent(evi_cv, ext, keepres = FALSE)
evi_mmax <- setExtent(evi_mmax, ext, keepres = FALSE)
# Create stack
evi_stack <- stack(evi_mean, evi_mmax, evi_cv)
